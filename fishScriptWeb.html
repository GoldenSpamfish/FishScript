<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="fishCSS.css">
    <meta charset="UTF-8">
    <title>fishScript</title>
</head>
<body>
<h1>fishScript</h1>
<h3>a mildly irritating language</h3>


<script>

    function fishRunner() {
        //let code = '>$ print @ Hello World'
        let code = document.getElementById("code").value;
        let lines = code.split('>');
        let variables = {};
        for (let i = 0; i < lines.length; i++) {
            while (lines[i].includes('\n')) {
                lines[i] = lines[i].replace('\n', '');
            }
        }
        //console.log(lines)

        // The print function
        function fishPrint(dataIn) {
            if (dataIn[0] === "@") {
                dataIn.shift()
                return " ".concat(dataIn.join(" "))
            } else if (dataIn[0] === "&") {
                // meat of the print function (change to get element)
                //console.log(dataIn)

                return variables[dataIn[1]]
            }
        }

        function variableDef(dataIn) {
            if (dataIn.shift() === 'number') {
                variables[dataIn[0]] = eval(dataIn[2])
            }


        }

        //data = [];

        // ACTUAL RUNNER

        for (let line in lines) {
            let data = lines[line].split(" ")
            //console.log(lines[line])
            //variable definition
            if (data[0] === "&") {
                data.shift();
                variableDef(data);
            }

            //for running functions
            else if (data[0] === "$") {
                data.shift()

                //print function
                if (data.shift() === "print") {
                    console.log(fishPrint(data))
                }
            }

            //loops
            else if (data[0] === "*") {
                data.shift()

                //for repeat loops(effectively for loops)
                if (data.shift() === "repeat") {
                    let repeats = eval(data.shift())


                    //repeated printing
                    if (data.shift() === "print") {
                        let toPrint = fishPrint(data)

                        for (let i = 0; i < repeats; i++) {
                            console.log(toPrint)
                        }
                    }
                }
            }
        }
    }
</script>
<form>
    <label for="code">Put your code here:</label><br>
    <input type="text" id="code" name="code"><br>
    <button type="button" onclick="fishRunner()">Run!</button>
</form>


</body>
</html>